DATO EQU 40H
ESTADO EQU 41H

ORG 1000H
MSJ DB "alla"
FIN DB ?

ORG 3000H
IMPRIMIR: MOV AL, [BX]
          OUT DATO, AL
          RET

ORG 2000H
IN AL, ESTADO
AND AL, 07FH
OUT ESTADO, AL

MOV BX, OFFSET MSJ
POLL: IN AL, ESTADO
      AND AL, 1
      JNZ POLL
CALL IMPRIMIR
      INC BX
      CMP BX, OFFSET FIN
      JNZ POLL
      
INT 0
END
